<!--

[b]Introduction[/b]

Welcome to this small tutorial about how to get started with TinyC5 development. This tutorial assumes that you ...:

[list]
[li]have basic coding knowledge[/li]
[li]have heard about TinyPTC/Pixeltoaster and/or framebuffer stuff[/li]
[li]have some basic knowledge about HTML and javascript[/li]
[/list]

Before we start, just another short list of what this tutorial is [b]not/not about[/b]:

[list]
[li]complete[/li]
[li]bug-free ;-)[/li]
[li]advanced[/li]
[li]producing great graphic effects[/li]
[/list]

[size=12pt]
[b]Step 01[/b]
[/size]

Let's start off with the most minimal example:

[code]
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        
        <script type="text/javascript" src="js/TinyC5-0.6.js"></script>
        
        <script type="text/javascript">
            function main() {
                 new TinyC5().start();
            }
        </script>
    </head>
    <body onload="main()">
    </body>
</html>
[/code]

Assuming that you know the basic structure of a standrad HTML page, let's focus on the important bits, actually only 2 lines.

With the followin line we include the TinyC5 library code:

[b]
[code]
<script type="text/javascript" src="js/TinyC5-0.6.js"></script>
[/code]
[/b]

Within the main-function, which is called after the page is successfully loaded, we create a new instance of TinyC5 and immediately call the start method.

[b]
[code]
new TinyC5().start();
[/code]
[/b]

[b]Result[/b]

We see a black square on the screen with the dimensions of 320x200 pixels, which are the default values. The black square is actually our drawing buffer, ie. [url=}canvas[/url] which is appended by default to the body element.

[url=]RESULT STEP 01[/url]

[size=12pt]
[b]Step 02[/b]
[/size]

In the second step we restructure our code. This will show us the different parts of how to setup a TinyC5 instnace. The important bits are as follows. We replace the code of the main funciton with the following lines:

[b]
[code]
var tinyC5;
tinyC5 = new TinyC5();
tinyC5.init();
tinyC5.update = function() {};
tinyC5.start();
[/code]
[/b]

Line 1: Declare a variable that will refer to our TinyC5 instance.
Line 2: Assign to our tinyC5 varibale a new instance of TinyC5.
Line 3: Initialize out TinyC5 instance.
Line 4: Overwrite the update property of our instance with a new function, which we leave is empty for now.
Line 5: Start the animation of our tinyC5 instance.

[b]Result[/b]

The outcome is the same as in Step 01. But this time we have created a detailed setup of our TinyC5 instance we can build on in future steps.

[url=]RESULT STEP 02[/url]

[size=12pt]
[b]Step 03[/b]
[/size]

In this step we beautify our application while adding some more CSS/HTML to our code. In addition, we define some arguments which we pass to the TinyC5.init() function to overwrite certain default values.

New CSS/HTML code. No magic in here really.

Include some styles...
[b]
[code]
<link rel="stylesheet" type="text/css" href="css/styles.css" />
[/code]
[/b]

Add some more HTML to our body...
[b]
[code]
<div id="container">
    <div id="tinyC5_container">
    </div>
</div>
<div id="footer">
    Tutorial | Created with <a href="http://www.dbfinteractive.com/forum/index.php?topic=5397.0">TinyC5</a>
</div>        
[/code]
[/b]

Then we define a new variable that we pass as argumennt to TinyC5.init(). The argument is a simple proterty object which values will configure the TinyC5 instance.

Lines we modified:

[b]
[code]
var tinyC5, args;
tinyC5 = new TinyC5();
args = {
    width: 160,
    height: 100,
    scale: 2,
    title: 'Tutorial | TinyC5',
    bgColor: tinyC5.color( 155, 255, 100, 255 ),
    container: document.getElementById( 'tinyC5_container' )
};
tinyC5.init( args );
[/code]
[/b]

Line 01: Added delcaration for args.
Line 03: Assigned property-object to args. Most properties should be pretty self-explanary. 
Line 06: The scale property will scale the canvas tag by the given value. In this example the resulting canvas will have a dimension of 320x200 pixels.
Line 07: The title will be set to the windows browser tab.
Line 08: We define a nice background color and overwrite the default value (which is solid black).
Line 09: In the previous steps the output canvas was appended directly beneath the body tag. If we pass another HTML element via the container property we can determine to which HTML node the canvas element is inserted in.
Line 11: We pass the created args as parameter to the TinyC5.init() funciton.

[b]Result[/b]

Now the layout changed mostly due to the CSS. Our output should now be in the centre of the screen showing a green square.

[url=]RESULT STEP 02[/url]


[size=12pt]
[b]Step 04[/b]
[/size]

Alright, let's draw something. Since we calculate the color of each pixel new on each loop, we do not need to set the initial background color anymore.

That's why we drop it:

[b]
[strike]
[code]
bgColor: tinyC5.color( 155, 255, 100, 255 ),
[/code]
[/strike]
[/b]

The main addition in this step is that we actually create some login in our update method - in this case we draw a sinple checkerboard:

[b]
[code]
tinyC5.update = function() {
    var p, color, index;
    index = 0;
    p = tinyC5.pixels;
    for( var y = 0; y < tinyC5.HEIGHT; y++ ) {
        for( var x=0; x < tinyC5.WIDTH; x++ ) {
            color = 255 * ( ( ( x >> 4 ) & 1 ) ^ ( ( y >> 4 ) & 1 ) );
            p[index++] = color;
            p[index++] = color;
            p[index++] = color;
            p[index++] = 255;
        }
    }
};
[/code]
[/b]

This should look actually a bit familiar to you if you have ever worked with tinyPTC/PixelToaster. Some quick notes:

Line 04: We make a local reference to the TinyC5.pixels array. The array holds all the pixel data in the following format [ Red, Green, Blue, Alpha, Red, Green, Blue, Alpha, Red, ... ]
Line 05: TinyC5.HEIGHT is the height value of the pixel buffer. In this case 100.
Line 06: Same with TinyC5.WIDTH. It's 160 pixel in our example.

[b]Result[/b]

The result is a simple black/white checkerboard. Guess the FX itself does not require any explanation.

[url=]RESULT STEP 02[/url]


[size=12pt]
[b]Step 05[/b]
[/size]

This step already indicates the end of the tutorial. In this step we added some movement to our small effect. Only one TinyC5 related function needs to be explained here.

[b]
[code]
tinyC5.getTime()
[/code]
[/b]

This returns the elapsed time in milliseconds since the TinyC5.start() function was called. Use this for timed animation.

[b]Result[/b]

Since this is the last step, the code contains detailed comments for further details. Please have a look at the code.

[url=]RESULT STEP 02[/url]

Please feel free to post any comments, thoughts or questions about this tutorial in this thread.

Thanks for reading.

-->

<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        
        <!-- Include CSS styling -->
        <link rel="stylesheet" type="text/css" href="css/styles.css" />
        
        <!-- Include TinyC5 library -->
        <script type="text/javascript" src="js/TinyC5-0.6.js"></script>
        
        <!-- Main FX Script -->
        <script type="text/javascript">
            
            // Main entry point
            function main() {
                
                // Define require vars
                var tinyC5, fc, color, args;
                
                // Creating TinyC5 instance
                // Note: It's ofcourse possible to create multiple instances
                tinyC5 = new TinyC5();
                
                // Defining the properties
                args = {
                    // Width in pixel
                    width: 160,
                    // Height in pixel
                    height: 100,
                    // Scale factor (relates to width & height)
                    scale: 2,
                    // Disable fullscreen stretching
                    fullscreen: false,
                    // Set browser windows title
                    title: 'Tutorial | TinyC5',
                    // Disable smoothing
                    smoothing: false,
                    // Disable mouse capturing (no need for mouse support)
                    captureMouse: false,
                    // Set default background color (RGBA)
                    bgColor: tinyC5.color( 0, 0, 0, 255 ),
                    // Define DOM container for TinyC5 canvas element
                    container: document.getElementById( 'tinyC5_container' )
                };
                
                // Initialize TinyC5 instance with arguments
                tinyC5.init( args );
                
                // Overwrite update function
                // This is the place where to put the magical FX logic
                tinyC5.update = function() {
                    // Declare local vars
                    var p, dx, dy, index = 0;

                    // tinyC5.getTime() returns passed millisecs since tinyC5.start() was called
                    // We divide it and have a steady growing value we use as a time modifier
                    fc = tinyC5.getTime()/800;
                                        
                    // Make a local reference to tinyC5.pixels array
                    p = tinyC5.pixels;
                    
                    // Create some local deltas for movement
                    dx = Math.sin( fc ) % 10 * 32;
                    dy = Math.cos( fc ) % 10 * 48;

                    // Loop over the pixel buffer array
                    // tinyC5.WIDTH and HEIGHT are the buffer 'height' and 'width'
                    for( var y = 0; y < tinyC5.HEIGHT; y++ ) {
                        for( var x=0; x < tinyC5.WIDTH; x++ ) {                            
                            // Calculate color YES/NO
                            color = ( ((x+dy >> 4) & 1) ^ ((y+dx >> 4) & 1) );
                            // Set values for red, green, blue, alpha
                            p[index++] = (x+y) * color;
                            p[index++] = (155-x) * color;
                            p[index++] = (y) * color;
                            p[index++] = 255;
                        }
                    }
                }

                // Start the show
                tinyC5.start();
            }
        </script>
    </head>
    <!-- Set main entry call -->
    <body onload="main()">
        <div id="container">
            <!-- This is the DOM element to which the TinyC5 canvas element is appended -->
            <div id="tinyC5_container">
            </div>
        </div>
        <div id="footer">
            Tutorial | Created with <a href="http://www.dbfinteractive.com/forum/index.php?topic=5397.0">TinyC5</a>
        </div>        
    </body>
</html>