window.cancelRequestAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}();window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(d){return window.setTimeout(d,1E3/60)}}(); function TinyC5(d){var e,l,c,g,b,s,h,m,t,n=false,f=false,u=0,v,z=1E3/60,w=255,i=Date.now(),o=i,x=0,p=0,j,q,k;j="";q="margin: 0px;padding: 0px;border:none;height: 100%;width: 100%;";q+="position: fixed;left: 0px;top: 0px;right: 0px;bottom: 0px;z-index:10000;";k="";var A=this;this.pixels=null;var B=requestAnimFrame,C=cancelRequestAnimFrame,y=function(){i=Date.now();p++;i>o+1E3&&(x=Math.round(p*1E3/(i-o)),o=i,p=0,t&&console.log(x+" FPS"));n?(A.update(),l.putImageData(g,0,0),s.drawImage(e,0,0,b.width, b.height),v=B(y,z)):C(v)};this.update=function(){};this.start=function(){n=true;u=Date.now();y()};this.stop=function(){n=false};this.setFullscreen=function(a){a!=f&&(a?(f=true,a=document.getElementsByTagName("body")[0],j=a.getAttribute("style"),k=b.getAttribute("style"),a.setAttribute("style","margin: 0px;padding: 0px;border:none;height: 100%;width: 100%;"),b.setAttribute("style",q)):(f=false,a=document.getElementsByTagName("body")[0],a.setAttribute("style",j),b.setAttribute("style",k),k=j=""))}; this.isFullscreen=function(){return f};this.getCanvas=function(){return b};this.getTime=function(){return Date.now()-u};this.copyPixels=function(a){if(this.pixels.length!=a.length)return false;for(var b=a.length,c=0;c<b;)this.pixels[c]=a[c++];return true};this.Utils={};this.Utils.getImagedataFromImage=function(a,c){var b=null,c=c||false;if(a&&a.width&&a.height){var d=document.createElement("canvas");d.setAttribute("width",a.width);d.setAttribute("height",a.height);d.getContext("2d").drawImage(a,0, 0);b=d.getContext("2d").getImageData(0,0,a.width,a.height).data;delete d;if(c){for(var d=[],f=0,e=0;e<b.length;e++)0!=(e+1)%4&&(d[f]=b[e],f++);b=d}}return b};c=d||{};m=c.scale||1;d=c.width||320;h=c.height||200;w=c.alpha||255;f=c.fullscreen||false;t=c.debug||false;c=c.container||document.getElementsByTagName("body")[0];e=document.createElement("canvas");e.setAttribute("width",d);e.setAttribute("height",h);l=e.getContext("2d");g=l.createImageData(d,h);for(var r=3;r<g.data.length;r+=4)g.data[r]=w;this.pixels= g.data;b=document.createElement("canvas");b.setAttribute("width",d*m);b.setAttribute("height",h*m);s=b.getContext("2d");this.WIDTH=d;this.HEIGHT=h;this.VERSION=0.4;this.setFullscreen(f);c.appendChild(b)};