window.cancelRequestAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}();window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(u){return window.setTimeout(u,1E3/60)}}();
function TinyC5(u){var n,l,f,p,g,b,m,e,d,j,k,q=!1,o,y=0,z,D=1E3/60,h,A,v,w,B,r,s,t;r="";s="margin: 0px;padding: 0px;border:none;height: 100%;width: 100%;";s+="position: fixed;left: 0px;top: 0px;right: 0px;bottom: 0px;z-index:10000;";t="";var c=this;this.pixels=null;this.mouseY=this.mouseX=0;this.mouseClick=!1;var E=requestAnimFrame,F=cancelRequestAnimFrame,x=function(){q?(c.update(),l.putImageData(g,0,0),m.drawImage(n,0,0,b.width,b.height),c.postUpdate(),c.mouseClick=!1,z=E(x,D)):F(z)},C=function(){j=
window.innerWidth/e;k=window.innerHeight/d;this.VIEW_WIDTH=Math.floor(e*j);this.VIEW_HEIGHT=Math.floor(d*k)},G=function(a){for(var c=this.pixels,b=this.pixels.length/4,i=0,a=a||h;b--;)c[i++]=a.r,c[i++]=a.g,c[i++]=a.b,c[i++]=a.a;return this.pixels},H=function(){l.fillRect(0,0,e,d);g=l.getImageData(0,0,e,d);return this.pixels=g.data};this.init=function(a){p&&b&&p.removeChild(b);f=a||{};j=f.scale||1;k=f.scale||1;e=f.width||320;d=f.height||200;h=f.bgColor||this.color(0,0,0);p=f.container||document.getElementsByTagName("body")[0];
A=f.title||"TinyC5";B=f.supportMobile||!1;n=document.createElement("canvas");n.setAttribute("width",e);n.setAttribute("height",d);l=n.getContext("2d");l.fillStyle="rgba("+h.r+","+h.g+","+h.b+","+h.a+")";g=l.createImageData(e,d);B&&this.isMobile()&&(a=document.createElement("meta"),a.setAttribute("name","viewport"),a.setAttribute("content","width=device-width, initial-scale=1.0, user-scalable=no"),document.getElementsByTagName("head")[0].appendChild(a));for(var a=0,c=g.data.length;c--;)g.data[a++]=
h.r,g.data[a++]=h.g,g.data[a++]=h.b,g.data[a++]=h.a;this.pixels=g.data;this.WIDTH=e;this.HEIGHT=d;this.VIEW_WIDTH=e*j;this.VIEW_HEIGHT=d*k;b=document.createElement("canvas");b.setAttribute("width",e*j);b.setAttribute("height",d*k);m=b.getContext("2d");p.appendChild(b);this.setSmoothing(f.smoothing);this.setCaptureMouse(f.captureMouse);this.setFullscreen(f.fullscreen);document.title=A};this.start=function(){q=!0;y=Date.now();x()};this.resume=function(){q=!0;x()};this.stop=function(){q=!1};this.onResize=
function(){C()};this.setFullscreen=function(a){a!=o&&("boolean"!=typeof a&&(o=!1),a?(o=!0,a=document.getElementsByTagName("body")[0],r=a.getAttribute("style"),t=b.getAttribute("style"),a.setAttribute("style","margin: 0px;padding: 0px;border:none;height: 100%;width: 100%;"),b.setAttribute("style",s),C(),window.addEventListener("resize",this.onResize,!1)):(window.removeEventListener("resize",this.onResize,!1),o=!1,a=document.getElementsByTagName("body")[0],a.setAttribute("style",r),b.setAttribute("style",
t),t=r="",j=Math.floor(b.getAttribute("width")/e),k=Math.floor(b.getAttribute("height")/d)))};this.isFullscreen=function(){return o};this.setSmoothing=function(a){"boolean"!=typeof a&&(a=!1);v=a;a=b.style;if(v){if(m.mozImageSmoothingEnabled)m.mozImageSmoothingEnabled=!0;a.setProperty("image-rendering","optimizeQuality","important");a.setProperty("-ms-interpolation-mode","bicubic","important")}else{if(m.mozImageSmoothingEnabled)m.mozImageSmoothingEnabled=!1;a.setProperty("image-rendering","optimizeSpeed",
"important");a.setProperty("image-rendering","-moz-crisp-edges","important");a.setProperty("image-rendering","-webkit-optimize-contrast","important");a.setProperty("image-rendering","optimize-contrast","important");a.setProperty("-ms-interpolation-mode","nearest-neighbor","important")}};this.isSmoothing=function(){return v};this.onMouseMove=function(a){var b=a.target,f=c.VIEW_WIDTH,i=c.VIEW_HEIGHT,e=0,d=0,e=a.pageX-b.offsetLeft-b.clientLeft,d=a.pageY-b.offsetTop-b.clientTop,e=~~(e/j),d=~~(d/k),e=
f^(e^f)&-(e<f),d=i^(d^i)&-(d<i);c.mouseX=0^(0^e)&-(0<e);c.mouseY=0^(0^d)&-(0<d)};this.onMouseClick=function(){c.mouseClick=!0};this.setCaptureMouse=function(a){a!=w&&("boolean"!=typeof a&&(a=!1),(w=a)?(b.addEventListener("mousemove",c.onMouseMove,!1),b.addEventListener(this.FAST_CLICK_EVENT,c.onMouseClick,!1)):(b.removeEventListener("mousemove",c.onMouseMove,!1),b.removeEventListener(this.FAST_CLICK_EVENT,c.onMouseClick,!1)))};this.isCaptureMouse=function(){return w};this.getCanvas=function(){return b};
this.getTime=function(){return Date.now()-y};this.color=function(a,c,b,e){return e?{r:a,g:c,b:b,a:e}:{r:a,g:c,b:b,a:255}};this.clamp=function(a){a=255^(a^255)&-(255>a);return 0^(0^a)&-(0<a)};this.isMobile=function(){return/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase())};this.copyPixels=function(a){if(this.pixels.length!=a.length)return!1;for(var c=a.length,b=0;c--;)this.pixels[b]=a[b++];return!0};this.update=function(){};this.postUpdate=function(){};
this.BROWSER_ENGINE_MSIE="msie";this.BROWSER_ENGINE_WEBKIT="webkit";this.BROWSER_ENGINE_SAFARI="safari";this.BROWSER_ENGINE_OPERA="opera";this.BROWSER_ENGINE_MOZILLA="mozilla";this.BROWSER_ENGINE=this.BROWSER_ENGINE_UNKNOWN="unknown";(function(){var a=/(opera)(?:.*version)?[ \/]([\w.]+)/,b=/(msie) ([\w.]+)/,e=/(mozilla)(?:.*? rv:([\w.]+))?/,d=window.navigator.userAgent.toLowerCase();switch((/(webkit)[ \/]([\w.]+)/.exec(d)||a.exec(d)||b.exec(d)||0>d.indexOf("compatible")&&e.exec(d)||[])[1]){case "mozilla":c.BROWSER_ENGINE=
c.BROWSER_ENGINE_MOZILLA;break;case "msie":c.BROWSER_ENGINE=c.BROWSER_ENGINE_MSIE;break;case "webkit":case "safari":c.BROWSER_ENGINE=c.BROWSER_ENGINE_WEBKIT;break;case "opera":c.BROWSER_ENGINE=c.BROWSER_ENGINE_OPERA;break;default:c.BROWSER_ENGINE=c.BROWSER_ENGINE_UNKNOWN}})();this.FAST_CLICK_EVENT=window.ontouch?"touchstart":"click";this.clearPixels=this.BROWSER_ENGINE===this.BROWSER_ENGINE_MSIE?H:G;this.VERSION=0.7;this.init(u)};