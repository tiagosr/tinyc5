<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script type="text/javascript" src="js/TinyC5-0.6.js"></script>
        <script type="text/javascript">
            function run() {
                var tinyC5 = new TinyC5();
                
                var p, index, zoom, frameCount = 0, color = 0.0, px, py, time = 0,dx = 0;
                tinyC5.update = function() {
                    p = tinyC5.pixels;
                    index = 0;
                    frameCount += 1;
                    time += 0.2;
                    color = 0.0;

/*
 *
	vec2 position = ( gl_FragCoord.xy / resolution.xy ) + mouse / 4.0;

	float color = 0.0;
	color += sin( position.x * cos( time / 15.0 ) * 80.0 ) + cos( position.y * cos( time / 15.0 ) * 10.0 );
	color += sin( position.y * sin( time / 10.0 ) * 40.0 ) + cos( position.x * sin( time / 25.0 ) * 40.0 );
	color += sin( position.x * sin( time / 5.0 ) * 10.0 ) + sin( position.y * sin( time / 35.0 ) * 80.0 );
	color *= sin( time / 10.0 ) * 0.5;

	gl_FragColor = vec4( vec3( color, color * 0.5, sin( color + time / 3.0 ) * 0.75 ), 1.0 );
 *
 *
       vec2 position = ( gl_FragCoord.xy / resolution.xy );

       float color = 0.0;
       color += sin( position.x * cos( time / 15.0 ) * 80.0 ) + cos( position.y * cos( time / 15.0 ) * 10.0 );
       color += sin( position.y * sin( time / 10.0 ) * 40.0 ) + cos( position.x * sin( time / 25.0 ) * 40.0 );
       color += sin( position.x * sin( time / 5.0 ) * 10.0 ) + sin( position.y * sin( time / 35.0 ) * 80.0 );
       color *= sin( time / 10.0 ) * 0.5;

       gl_FragColor = vec4( vec3( color, color * 0.5, sin( color + time / 3.0 ) * 0.75 ), 1.0 );
 */
                    if ( dx > 30 ) {
                        dx = 0;
                    } else {
                        dx++;
                    }
                    dx = tinyC5.getTime()/40 %  32;
                    for( var y = 0; y < tinyC5.HEIGHT; y++ ) {
                        for( var x=0; x < tinyC5.WIDTH; x++ ) {
                            color = 255 * ( ( (x >> 4) & 1) ^ ((y+dx >> 4) & 1) );
                            p[index++] = color;
                            p[index++] = color;
                            p[index++] = color;
                            p[index++] = 255;
                            
                            /*
                            px = x / tinyC5.WIDTH;
                            py = y / tinyC5.HEIGHT;
                            
                            color += Math.sin( px * Math.cos( time / 15.0 ) * 80.0 ) + Math.cos( py * Math.cos( time / 15.0 ) * 10.0 );
                            color += Math.sin( py * Math.sin( time / 10.0 ) * 40.0 ) + Math.cos( px * Math.sin( time / 25.0 ) * 40.0 );
                            color += Math.sin( px * Math.sin( time / 5.0 ) * 10.0 ) + Math.sin( py * Math.sin( time / 35.0 ) * 80.0 );
                            color *= Math.sin( time / 10.0 ) * 0.5;
                            
                            p[index++] = color * 255;// * 0.75;
                            p[index++] = color * 128;// * 0.75;
                            p[index++] = Math.sin( color + time / 3.0 );// * 0.75;
                            p[index++] = 255;
                            */
                        }
                    }
                }
                
                // Get the canvas object
                var canvas = tinyC5.getCanvas();
                canvas.addEventListener( 'click', function(e) { 
                    console.log( color );
                } );
                
                
                tinyC5.start();
            }
        </script>
    </head>
    <body onload="run()">
    </body>
</html>